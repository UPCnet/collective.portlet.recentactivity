<ol class="recent_activity">

    <tal:items tal:define="plone_view context/@@plone;
                           getIcon nocall:plone_view/getIcon;
                           normalizeString nocall:plone_view/normalizeString;
                           toLocalizedTime nocall:plone_view/toLocalizedTime;"
               tal:repeat="activity view/recent_activities">

        <li class="portletItem"
            tal:define="oddrow repeat/activity/odd;
                        item_icon python:getIcon(activity);"
            tal:attributes="class python:oddrow and  'portletItem even' or 'portletItem odd'">
            User <a href=""
                    tal:content="activity/user"
                    tal:attributes="href activity/user_url" />
            <span tal:content="activity/action" />
            <a href=""
               tal:content="python:activity['object'].title"
               tal:attributes="href activity/object_url" />
            <tal:condition tal:condition="python: activity['action'] == 'added'">
	            to
	            <a href=""
	               tal:content="python:activity['parent'].title"
	               tal:attributes="href activity/parent_url" />
	        </tal:condition>
            <br />&mdash <span tal:replace="activity/time" /> minutes ago.
        </li>
    </tal:items>

</ol>